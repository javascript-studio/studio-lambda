# Changes

## 4.0.0

- ğŸ’¥ [`8be1398`](https://github.com/javascript-studio/studio-lambda/commit/8be1398865ee2b415d8fd04436068d495ac586ea)
  Require node 16
- ğŸ’¥ [`496cc52`](https://github.com/javascript-studio/studio-lambda/commit/496cc525838552e0284f740d07d9c5620233366e)
  Use dynamic import to support loading es modules
- ğŸ’¥ [`d458059`](https://github.com/javascript-studio/studio-lambda/commit/d4580593c68ef845a236c03a7be02a6bffbb181a)
  Change generic destroy error code to `E_FAILED`
- ğŸ›¡ [`8a6a3b3`](https://github.com/javascript-studio/studio-lambda/commit/8a6a3b35a5d28e21502cdbad8140039b8341196f)
  npm audit
- âœ¨ [`6814ed2`](https://github.com/javascript-studio/studio-lambda/commit/6814ed26f83fdec1807e14b42d2a5c8a12afe973)
  Update Studio Changes
- âœ¨ [`0d942b9`](https://github.com/javascript-studio/studio-lambda/commit/0d942b9a8733808958dfec9d6f2071901dc8b597)
  Upgrade referee-sinon
- âœ¨ [`673cc02`](https://github.com/javascript-studio/studio-lambda/commit/673cc0266bdaf961fd8d688d96f0bb6b0221f469)
  Update prettier
- âœ¨ [`5c264ff`](https://github.com/javascript-studio/studio-lambda/commit/5c264ff5560fc7eb4b518f8f3dfd455f9438d6da)
  Upgrade mocha
- âœ¨ [`bf9897b`](https://github.com/javascript-studio/studio-lambda/commit/bf9897bc9a2317d3224b0cf4a0abff5e82872c0c)
  Upgrade eslint-config and eslint

_Released by [Maximilian Antoni](https://github.com/mantoni) on 2023-01-19._

## 3.0.2

- ğŸ› [`5b7e59e`](https://github.com/javascript-studio/studio-lambda/commit/5b7e59e36d5b041b729ebc41e1b6edf40ad3d390)
  Fix region and account config via env

_Released by [Maximilian Antoni](https://github.com/mantoni) on 2021-06-23._

## 3.0.1

- ğŸ› [`e1be0d4`](https://github.com/javascript-studio/studio-lambda/commit/e1be0d43cc69645cd7f9a10b7a51d3358af96b28)
  Handler `JSON.stringify` error in lambda response
- âœ¨ [`526574b`](https://github.com/javascript-studio/studio-lambda/commit/526574b5dbf616747079a012f5075384b25d92ab)
  Upgrade @sinonjs/referee-sinon to latest (Morgan Roderick)
- âœ¨ [`2f25018`](https://github.com/javascript-studio/studio-lambda/commit/2f25018dec371373b33c8245549135cb3c79aeb9)
  Set required node version in package-lock.json (Morgan Roderick)

_Released by [Maximilian Antoni](https://github.com/mantoni) on 2021-05-21._

## 3.0.0

- ğŸ’¥ [`b5a53ad`](https://github.com/javascript-studio/studio-lambda/commit/b5a53ad96c6e915d35015923c5055895c84d7352)
  Require node 12
- ğŸ [`21b2d2c`](https://github.com/javascript-studio/studio-lambda/commit/21b2d2c4b5b6551935335f7df5d2c36e9306add7)
  Return promise in lambda.invoke if no callback is given
- ğŸ [`c37577a`](https://github.com/javascript-studio/studio-lambda/commit/c37577a4beee285f3c6543d30b8b8fa323a0069b)
  Support async lambda functions
- ğŸ“š [`4de3f74`](https://github.com/javascript-studio/studio-lambda/commit/4de3f74669cf682d0bb962e25416b0d4d1611535)
  Document usage with async await
- ğŸ› [`2111a8f`](https://github.com/javascript-studio/studio-lambda/commit/2111a8f14f153c703ba2ce8989e56b08c7c4f07d)
  Fix error handling if lambda throws while launching
- âœ¨ [`957d2e6`](https://github.com/javascript-studio/studio-lambda/commit/957d2e6f7b78fee49db17405cebaf320d049ed71)
  Avoid else by returning early
- âœ¨ [`e6879f2`](https://github.com/javascript-studio/studio-lambda/commit/e6879f2575c639d9b3feb1915062a73e1c935169)
  Configure GitHub actions
- âœ¨ [`64de260`](https://github.com/javascript-studio/studio-lambda/commit/64de2605cc4875bd1a66cb067a2f066e6ae8977c)
  Run lint, test and prettier checks separately
- âœ¨ [`b9db826`](https://github.com/javascript-studio/studio-lambda/commit/b9db8264ebc97c92e21b55489e6015fe90394d6d)
  Update Studio Changes
- âœ¨ [`0af1d4e`](https://github.com/javascript-studio/studio-lambda/commit/0af1d4e3005cfe863af46b770cfc9d7502738238)
  Upgrade referee-sinon to latest
- âœ¨ [`f2000dd`](https://github.com/javascript-studio/studio-lambda/commit/f2000dd28b2ca00a987c1404034ad5b687b02ad0)
  Upgrade mocha to latest
- âœ¨ [`c466a9d`](https://github.com/javascript-studio/studio-lambda/commit/c466a9de0e8954498fe9ef537450db0b891e222e)
  Setup prettier
- âœ¨ [`e0469bb`](https://github.com/javascript-studio/studio-lambda/commit/e0469bb7d7514d208d67a5de9c1729f71c8cb92b)
  Upgrade eslint and eslint-config
- âœ¨ [`94c71c6`](https://github.com/javascript-studio/studio-lambda/commit/94c71c6ce1338604b61312731dddc06036317de5)
  Use npm 7
- âœ¨ [`b121728`](https://github.com/javascript-studio/studio-lambda/commit/b121728669ce120cb737ea750e1a739170ceac70)
  Add .gitignore
- âœ¨ [`883ba54`](https://github.com/javascript-studio/studio-lambda/commit/883ba544640776b0d24d6adafc1fe449dfe2d56e)
  Fix memory limit tests for node 12
- âœ¨ [`0914a38`](https://github.com/javascript-studio/studio-lambda/commit/0914a384b6afcfc3c92e977ee3779347cc6e15ab)
  Upgrade referee-sinon to v6
- âœ¨ [`eb41ede`](https://github.com/javascript-studio/studio-lambda/commit/eb41ede3c2e0abae743d7412c455212b03ccc8b7)
  Upgrade Studio Changes to v2
- âœ¨ [`570c069`](https://github.com/javascript-studio/studio-lambda/commit/570c069af8cddb1cb65d6ec345b3f17ba9d21384)
  Make eslint-config a dev dependency

_Released by [Maximilian Antoni](https://github.com/mantoni) on 2021-04-21._

## 2.0.2

- ğŸ› [`6a70c3c`](https://github.com/javascript-studio/studio-lambda/commit/6a70c3cae4640e68d6dd62196aeac5bfaaf62737)
  Revert "Do not prepend forwarded log namespace with name"

    > This reverts commit 7082da34f64146db43402d40835bfb2ffbb934f7.

## 2.0.1

- ğŸ› [`7082da3`](https://github.com/javascript-studio/studio-lambda/commit/7082da34f64146db43402d40835bfb2ffbb934f7)
  Do not prepend forwarded log namespace with name

## 2.0.0

- ğŸ’¥ [`82e917a`](https://github.com/javascript-studio/studio-lambda/commit/82e917a83d8536e778ffa18aa461c301d5d656e5)
  __BREAKING:__ Upgrade Studio Log to v2
- âœ¨ [`e0669ea`](https://github.com/javascript-studio/studio-lambda/commit/e0669ea81256c489608fc43c6d8304a5d28293af)
  Use Sinon + Referee and use Sinon default sandbox
- ğŸ“š [`8362816`](https://github.com/javascript-studio/studio-lambda/commit/83628163b14ca0cd937c8ee6ca01fb3b27c36ae0)
  Add commit links with `--commits`

## 1.14.1

- ğŸ› Pass error cause in logs through to lambda logger

## 1.14.0

- ğŸ Implement more AWS environment variables for lambda functions
- ğŸ Change log topic for new lambdas from "launch" to "spawn"
- âœ¨ Add tests for AWS_REGION and AWS_PROFILE environment variables
- âœ¨ Refactor setting `getRemainingTimeInMillis` on context

## 1.13.0

- ğŸ Add `shutdown` and `stats` APIs
- ğŸ› Improve lambda function error handling
- ğŸ› Handle ndjson transform errors

## 1.12.0

- ğŸ Use configured memory and improve process exit handling

## 1.11.1

- ğŸ› Improve generated `awsRequestId`

## 1.11.0

- ğŸ Add support for `functionName`.
- ğŸ Add support for `awsRequestId`.
- ğŸ Add support for `memoryLimitInMB`.
- ğŸ Add support for `getRemainingTimeInMillis()`.
- ğŸ› Build the function ARN within the Lambda function instead of injecting it.
  The `STUDIO_AWS_ACCOUNT` environment variable was not picket up correctly.

## 1.10.1

- âœ¨ Use `@studio/ndjson` to parse log output from Lambdas

## 1.10.0

- âš ï¸ Remove hack to filter log data

    > Log data should be filtered where it's created. With the new
    > `@studio/log-x` module and the updated `@studio/wrap` this hack can be
    > removed.

- âœ¨ Add `package-lock.json`

## 1.9.1

- ğŸ› Add `invokedFunctionArn` to given context if missing

## 1.9.0

- ğŸ Generate `invokedFunctionArn` in default context
- ğŸ“š Use upper case `Lambda` module name in examples

## 1.8.2

- ğŸ› Fix entries cleanup in kill handler

    > The entries array is not necessarily cleaned up in reverse insertion
    > order. With this patch, the kill handler does not expect the entry at a
    > fixed position, but queries the entry to remove by ID instead.


## 1.8.1

- ğŸ› Fail on missing environment variables

    > - Throw an error if a variable replacement fails.
    > - Handle launch exceptions by logging an error and invoking the callback
    >   with an error message.

## 1.8.0

- ğŸ Support environment variable replacement in Lambda config files

    > If a config file contains placeholders in the form `${ENV_VAR}`, they are
    > replaced with the corresponding environment variable. This feature is not
    > supported by Apex. Use it to configure secret variables in local configs.

## 1.7.0

- ğŸ™Š Do not log Lambda input and output

    > The new `@studio/wrap` implementation already do logging within the
    > Lambda function. Log filtering should also be applied there.

## 1.6.2

- ğŸ› Pass on parent process `execArgv`

    > This allows to invoke the parent process with v8 options like
    > `--stack-trace-limit=50` and have them passed on to the Lambda
    > processes. This restores the default behavior for child processes.

## 1.6.1

Log output improvements:

- ğŸ”¢ Include the Lambda execution time in the stats log message
- ğŸ™ˆ Set `config_file` to `"<defaults>"` if not found
- ğŸ™ˆ Remove messages to streamline log output

## 1.6.0

- ğŸ”¢ Log Lambda process memory usage

## 1.5.0

- ğŸ Add Lamdba debugging option

## 1.4.0

- ğŸ Pass on `process.env.DEBUG`

## 1.3.3

- ğŸ Improve log output filtering
- ğŸ Handle Lambda logs on stdout
- ğŸ™ˆ Do not log `authorizationToken`
- ğŸ› Fix log message with string event

## 1.3.2

- ğŸ› Reduce duplication in log messages

## 1.3.1

- ğŸ› Rename logger

## 1.3.0

- ğŸ Use `@studio/log`

## 1.2.2

- ğŸ› Handle invalid lambda response

## 1.2.1

- ğŸ› Timeouts are defined in seconds

## 1.2.0

- ğŸ Add `base_dir` config option

## 1.1.2

- ğŸ Pass `HOME` environment variable for the `aws-sdk` module to find the
  credentials file
- âœ¨ Change log emoji for send and receive events

## 1.1.1

A few bug fixes and minor improvements:

- ğŸ› Preserve configured env if config file is loaded
- ğŸ› Do not log authorization and token header values
- ğŸ› Prefix log messages with "Lambda"
- ğŸ› Log lambda error response

## 1.1.0

- ğŸ Allow to pass an optional `context` object to the Lambda handler
  function. If no context is given, it defaults to an empty object, retaining
  the previous behavior.

## 1.0.0

- âœ¨ Inception
